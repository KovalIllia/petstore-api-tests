{"uid":"b98aa1689cc4893c","name":"test_upload_pet_image","fullName":"tests.test_pet_api#test_upload_pet_image","historyId":"daf0844066cfc69401394e08bb390be5","time":{"start":1760516482492,"stop":1760516486103,"duration":3611},"status":"failed","statusMessage":"AssertionError: Failed to get pet after image upload\nassert 404 == 200\n +  where 404 = <Response [404]>.status_code","statusTrace":"pet_payload = {'category': {'id': 161764406, 'name': 'dinner'}, 'id': 1409719305, 'name': 'Rex', 'photoUrls': ['https://dummyimage.com/355x248'], ...}\nfiles_client = <src.api.files_api.FilesApi object at 0x7f1f205bc1f0>\npet_api = <src.api.pet_api.PetApi object at 0x7f1f2019c3d0>\n\n    @pytest.mark.flaky(reruns=3, reruns_delay=2)\n    def test_upload_pet_image(pet_payload, files_client, pet_api):\n        creating_pet = pet_api.add_pet(pet_payload)\n        assert creating_pet.status_code == 200, f\"unsuccessful attempt to add a pet\"\n    \n        created_pet = creating_pet.json()\n        pet_id = created_pet[\"id\"]\n        PetWaiter.wait_for_pet(pet_api, pet_id, expected_status=200)\n    \n        image_path = \"test_dog.png\"\n        file_path = FileFactory.pet_image(image_path)\n    \n        response = files_client.upload_pet_image(pet_id=pet_id, file_path=file_path)\n        assert response.status_code == 200, f\"unsuccessful to upload pet image\"\n        upload_data = response.json()\n        assert (\n                \"message\" in upload_data\n        ), f\"No 'message' in form update response: {upload_data}\"\n        for key in [\"code\", \"type\", \"message\"]:\n            assert key in upload_data, f\"Missing {key} in response: {upload_data}\"\n    \n        get_response = pet_api.find_pet_by_id(pet_id)\n>       assert get_response.status_code == 200, f\"Failed to get pet after image upload\"\nE       AssertionError: Failed to get pet after image upload\nE       assert 404 == 200\nE        +  where 404 = <Response [404]>.status_code\n\ntests/test_pet_api.py:186: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1760516465025,"stop":1760516465026,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_client","time":{"start":1760516465026,"stop":1760516465027,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pet_api","time":{"start":1760516465027,"stop":1760516465027,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pet_payload","time":{"start":1760516482492,"stop":1760516482492,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"files_client","time":{"start":1760516482492,"stop":1760516482492,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"logger","time":{"start":1760516482492,"stop":1760516482492,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Failed to get pet after image upload\nassert 404 == 200\n +  where 404 = <Response [404]>.status_code","statusTrace":"pet_payload = {'category': {'id': 161764406, 'name': 'dinner'}, 'id': 1409719305, 'name': 'Rex', 'photoUrls': ['https://dummyimage.com/355x248'], ...}\nfiles_client = <src.api.files_api.FilesApi object at 0x7f1f205bc1f0>\npet_api = <src.api.pet_api.PetApi object at 0x7f1f2019c3d0>\n\n    @pytest.mark.flaky(reruns=3, reruns_delay=2)\n    def test_upload_pet_image(pet_payload, files_client, pet_api):\n        creating_pet = pet_api.add_pet(pet_payload)\n        assert creating_pet.status_code == 200, f\"unsuccessful attempt to add a pet\"\n    \n        created_pet = creating_pet.json()\n        pet_id = created_pet[\"id\"]\n        PetWaiter.wait_for_pet(pet_api, pet_id, expected_status=200)\n    \n        image_path = \"test_dog.png\"\n        file_path = FileFactory.pet_image(image_path)\n    \n        response = files_client.upload_pet_image(pet_id=pet_id, file_path=file_path)\n        assert response.status_code == 200, f\"unsuccessful to upload pet image\"\n        upload_data = response.json()\n        assert (\n                \"message\" in upload_data\n        ), f\"No 'message' in form update response: {upload_data}\"\n        for key in [\"code\", \"type\", \"message\"]:\n            assert key in upload_data, f\"Missing {key} in response: {upload_data}\"\n    \n        get_response = pet_api.find_pet_by_id(pet_id)\n>       assert get_response.status_code == 200, f\"Failed to get pet after image upload\"\nE       AssertionError: Failed to get pet after image upload\nE       assert 404 == 200\nE        +  where 404 = <Response [404]>.status_code\n\ntests/test_pet_api.py:186: AssertionError","steps":[{"name":"POST /pet","time":{"start":1760516482492,"stop":1760516482630,"duration":138},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"GET /pet/{petId}","time":{"start":1760516482630,"stop":1760516482742,"duration":112},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"GET /pet/{petId}","time":{"start":1760516485745,"stop":1760516485858,"duration":113},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"GET /pet/{petId}","time":{"start":1760516485991,"stop":1760516486103,"duration":112},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[{"uid":"cc196a013a5fe052","name":"stdout","source":"cc196a013a5fe052.txt","type":"text/plain","size":378}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_pet_api"},{"name":"host","value":"runnervmwhb2z"},{"name":"thread","value":"3580-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_pet_api"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"b98aa1689cc4893c.json","parameterValues":[]}